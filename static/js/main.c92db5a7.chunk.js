(window.webpackJsonp=window.webpackJsonp||[]).push([[0],[,,,,,,,,,function(e,t,n){e.exports=n(17)},,,,,function(e,t,n){},function(e,t,n){e.exports=n.p+"static/media/logo.5d5d9eef.svg"},function(e,t,n){},function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),i=n(7),c=n.n(i),l=(n(14),n(1)),o=(n(15),n(16),r.a.createContext()),u={isRequired:function(){throw new Error("A required parameter is missing")},stopPropagation:function(e){e.stopPropagation()}},s=u.isRequired,m=function(e){var t=e.onClick,n=void 0===t?s():t,a=e.item,i=void 0===a?s():a,c=e.onDelete,l=void 0===c?s():c,o=e.colorClass,u=void 0===o?"is-link":o;return r.a.createElement("div",{className:"control",onClick:n},r.a.createElement("div",{className:"tags has-addons"},r.a.createElement("a",{className:"tag ".concat(u)},i.name),r.a.createElement("a",{className:"tag is-delete",onClick:function(e){return l(e,i)}})))},d=u.isRequired,f=function(e){var t=e.topic,n=void 0===t?d():t,i=e.onClick,c=void 0===i?d():i,l=Object(a.useContext)(o);return r.a.createElement(m,{onClick:c,item:n,onDelete:function(e,t){e.stopPropagation(),l.removeTopic(t)}})},p=n(2),v=function(e){return r.a.createElement("div",{className:"box"},e.children)};function b(e){var t=e.children;return r.a.createElement("div",{className:"field is-grouped is-grouped-multiline"},t)}var E=function(e){var t=e.list,n=e.renderContent;return t.length>0?r.a.createElement(b,null,t.map(function(e){return n(e)})):"None"},g=function(e){var t=e.topicName,n=e.onChangeTopicName,a=e.topicDescription,i=e.setTopicDescription,c=e.addTopic;return r.a.createElement(v,{key:"2"},"Create a topic: ",r.a.createElement("br",null),"Name: ",r.a.createElement("input",{value:t,onChange:n})," ",r.a.createElement("br",null),"Description: ",r.a.createElement("input",{value:a,onChange:function(e){return i(e.target.value)}})," ",r.a.createElement("br",null),r.a.createElement("button",{onClick:c},"Create"))};var h=function(e){var t=Object(a.useState)(""),n=Object(l.a)(t,2),r=n[0],i=n[1],c=Object(a.useState)(""),o=Object(l.a)(c,2),u=o[0],s=o[1];return{topicName:r,topicDescription:u,addTopic:function(){var t=e.addTopic({name:r,description:u});return i(""),s(""),t},onChangeTopicName:function(e){return i(e.target.value)},setTopicDescription:s}},O=function(e){var t=e.labelName,n=e.setLabelName,a=e.addLabel;return r.a.createElement(v,null,"Create a label: ",r.a.createElement("br",null),"Name: ",r.a.createElement("input",{value:t,onChange:function(e){return n(e.target.value)}})," ",r.a.createElement("br",null),r.a.createElement("button",{onClick:a},"Create"))};var j=function(e){var t=Object(a.useState)(""),n=Object(l.a)(t,2),r=n[0],i=n[1];return{labelName:r,setLabelName:i,addLabel:function(){var t=e.addLabel({name:r});return i(""),t}}},k=function(e){var t=e.title,n=e.description;return r.a.createElement("section",{className:"hero is-dark"},r.a.createElement("div",{className:"hero-body"},r.a.createElement("div",{className:"container"},r.a.createElement("h1",{className:"title"},t),r.a.createElement("h2",{className:"subtitle"},n))))};function C(e){var t=e.topic,n=void 0===t?u.isRequired():t,i=(e.topics,Object(a.useContext)(o)),c=i.topics.filter(function(e){return e.id!=n.id}),l=i.getSimilarTopics(n),s=i.getLabels(n),d=h(i),f=Object(p.a)({},d,{addTopic:function(){var e=d.addTopic();i.linkTwoTopics(e,n)}}),b=j(i),C=Object(p.a)({},b,{addLabel:function(){var e=b.addLabel();i.labelTopic(n,e)}}),T=r.a.createElement(E,{list:l,renderContent:function(e){return r.a.createElement(m,{item:e,onClick:function(){},onDelete:function(){return t=e,void i.removeTopicLink(t,n);var t}})}}),y=function(e){i.linkTwoTopics(e,n)},N=r.a.createElement("ul",null,c.map(function(e){return r.a.createElement(a.Fragment,{key:e.id},r.a.createElement("li",null," ",e.name," ",r.a.createElement("button",{onClick:function(){return y(e)}}," link ")," "))}));return r.a.createElement(a.Fragment,null,r.a.createElement("div",{style:{"margin-bottom":"20px"}},r.a.createElement(k,{title:n.name,description:n.description})),r.a.createElement(v,null,r.a.createElement("div",{style:{display:"flex"}},r.a.createElement("span",{style:{marginRight:"10px"}},"Labels: "),r.a.createElement("div",null,r.a.createElement(E,{list:s,renderContent:function(e){return r.a.createElement(m,{colorClass:"is-primary",item:e,onClick:function(){},onDelete:function(){return t=e,void i.removeLabelFromTopic(n,t);var t}})}})))),r.a.createElement(v,null,r.a.createElement("div",{style:{display:"flex"}},r.a.createElement("span",{style:{marginRight:"10px"}},"Topics: "),T)),r.a.createElement(O,C),r.a.createElement(g,f),r.a.createElement(v,null,"Other nodes: ",r.a.createElement("br",null),N),r.a.createElement(v,null,"All labels: ",r.a.createElement("br",null),r.a.createElement(E,{list:i.labels,renderContent:function(e){return r.a.createElement("span",null," ",e.name," ",r.a.createElement("button",{onClick:function(t){return a=e,void i.labelTopic(n,a);var a}},"Add")," ")}})))}var T=function(e){var t=e.label,n=void 0===t?u.isRequired():t,a=e.onClick;return r.a.createElement(m,{onClick:a,item:n,onDelete:u.stopPropagation,colorClass:"is-primary"},n.name)};function y(){return"oh label page is different"}var N=n(4),L=n(3),w=n(8),S=!0;var x={saveGraph:function(e){if(!S)return t={graph:e},fetch("/graph",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(t)}).then(function(e){return e.json()});var t,n=new Blob([JSON.stringify(e)],{type:"text/plain;charset=utf-8"});Object(w.saveAs)(n,"graph.txt")},getGraph:function(e){if(!S)return fetch("/graph").then(function(e){return e.json()});var t=e.target;if(t.files.length>0){var n=e.target.files[0],a=new FileReader;a.onload=function(e){var n=JSON.parse(e.target.result);return t.value=null,n},a.readAsText(n)}}};var D=function(){var e=Object(a.useState)(0),t=Object(l.a)(e,2),n=t[0],r=t[1];return{id:n,generate:function(){var e=n+1;return r(e),e},restore:function(e){r(e)}}},R=u.isRequired,P=function(e,t){return[e.id,t.id].sort()},q=function(e,t){return[e.id,t.id]},A=function(){var e=D(),t=function(t){var n=t.name,a=void 0===n?R():n;return{id:e.generate(),name:a,similar:[]}},n=function(t){var n=t.name,a=void 0===n?R():n,r=t.description,i=void 0===r?"":r;return{id:e.generate(),name:a,description:i,labels:[],similar:[],comments:[]}},r=Object(a.useState)({}),i=Object(l.a)(r,2),c=i[0],o=i[1],u=Object(a.useState)({}),s=Object(l.a)(u,2),m=s[0],d=s[1],f=Object(a.useState)(-1),v=Object(l.a)(f,2),b=v[0],E=v[1],g=Object(a.useState)(-1),h=Object(l.a)(g,2),O=h[0],j=h[1],k=Object(a.useState)([]),C=Object(l.a)(k,2),T=C[0],y=C[1],w=Object(a.useState)([]),S=Object(l.a)(w,2),A=S[0],F=S[1],J=Object(a.useState)([]),B=Object(l.a)(J,2),G=B[0],W=B[1],I=O>-1,$=b>-1?c[b]:null,z=I?m[O]:null,H=Object.values(c),K=Object.values(m),M=function(t){e.restore(t.id),o(t.topicDict),d(t.labelDict),y(t.topicLinks),F(t.labelLinks),W(t.topicLabelLinks)},Q=function(e,t){return e[0]===t[0]&&e[1]===t[1]},U=(Object.values(m),function(e){return function(t){return!Q(e,t)}});return{removeTopicLink:function(e,t){var n=P(e,t);y(T.filter(U(n)))},removeLabelFromTopic:function(e,t){var n=q(e,t);W(G.filter(U(n)))},labelTopic:function(e,t){var n=q(e,t);(function(e){return G.some(function(t){return Q(t,e)})})(n)||W([].concat(Object(N.a)(G),[n]))},getLabels:function(e){var t=e.id,n=[],a=!0,r=!1,i=void 0;try{for(var c,o=G[Symbol.iterator]();!(a=(c=o.next()).done);a=!0){var u=c.value,s=Object(l.a)(u,2),d=s[0],f=s[1];t===d&&n.push(f)}}catch(p){r=!0,i=p}finally{try{a||null==o.return||o.return()}finally{if(r)throw i}}return n.map(function(e){return m[e]})},topics:H,labels:K,addTopic:function(e){var t=n(e);return o(Object(p.a)({},c,Object(L.a)({},t.id,t))),t},addLabel:function(e){var n=t(e);return d(Object(p.a)({},m,Object(L.a)({},n.id,n))),n},save:function(){var t={id:e.id,topicDict:c,labelDict:m,topicLinks:T,labelLinks:A,topicLabelLinks:G};return x.saveGraph(t)},load:M,currentTopic:$,currentLabel:z,changeTopic:function(e){E(e.id)},changeLabel:function(e){j(e.id)},linkTwoTopics:function(e,t){var n=P(e,t);(function(e){return T.some(function(t){return Q(e,t)})})(n)||y([].concat(Object(N.a)(T),[n]))},topicLinks:T,getSimilarTopics:function(e){var t=e.id,n=[],a=!0,r=!1,i=void 0;try{for(var o,u=T[Symbol.iterator]();!(a=(o=u.next()).done);a=!0){var s=o.value,m=Object(l.a)(s,2),d=m[0],f=m[1];d===t&&n.push(f),f===t&&n.push(d)}}catch(p){r=!0,i=p}finally{try{a||null==u.return||u.return()}finally{if(r)throw i}}return n.map(function(e){return c[e]})},updateTopic:function(e){o(Object(p.a)({},c,Object(L.a)({},e.id,e)))},removeTopic:function(e){var t=Object.fromEntries(Object.entries(c).filter(function(t){return t[0]!=e.id}));o(t),y(T.filter(function(t){var n=Object(l.a)(t,2),a=n[0],r=n[1];return a!==e.id&&r!==e.id})),W(G.filter(function(t){return Object(l.a)(t,1)[0]!==e.id}))}}},F=function(e){return r.a.createElement("div",{style:{margin:"20px"}},e.children)},J=function(e){var t=e.text,n=e.onClick;return r.a.createElement(v,null,r.a.createElement("button",{onClick:n},t))},B=function(e){var t=e.onClick;return r.a.createElement(J,{onClick:t,text:"Save"})},G=function(){var e="main",t="topicPage",n="labelPage",i=A(),c=i.topics,u=i.labels,s=Object(a.useState)(e),m=Object(l.a)(s,2),d=m[0],p=m[1],E=function(){return p(n)},k=function(e){var t=e.title,n=e.children;return r.a.createElement("div",{className:"card"},r.a.createElement("header",{className:"card-header"},r.a.createElement("p",{className:"card-header-title"},t)),r.a.createElement("div",{className:"card-content"},r.a.createElement("div",{class:"content"},n)))},N=r.a.createElement(a.Fragment,null,r.a.createElement(k,{title:"Topics"},c.length>0?r.a.createElement(b,null,c.map(function(e){return r.a.createElement(f,{key:e.name,topic:e,onClick:function(){return function(e){i.changeTopic(e),p(t)}(e)}})})):"None"),r.a.createElement(k,{title:"Labels"},u.length>0?r.a.createElement(b,null,u.map(function(e){return r.a.createElement(T,{key:e.name,label:e,onClick:E})})):"None"),r.a.createElement(g,h(i)),r.a.createElement(O,j(i)),r.a.createElement(B,{onClick:function(){return i.save()}}),r.a.createElement(v,null,"Load from file: ",r.a.createElement("input",{type:"file",onChange:function(e){var t=e.target;if(t.files.length>0){var n=e.target.files[0],a=new FileReader;a.onload=function(e){var n=JSON.parse(e.target.result);t.value=null,i.load(n)},a.readAsText(n)}}})));return r.a.createElement(o.Provider,{value:i},r.a.createElement(F,null,function(){switch(d){case e:return N;case t:return r.a.createElement(C,{topic:i.currentTopic});case n:return r.a.createElement(y,null);default:return N}}(),r.a.createElement(J,{text:"to main page",onClick:function(){return p(e)}})))},W=function(){return r.a.createElement("div",null,r.a.createElement(G,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(r.a.createElement(W,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}],[[9,1,2]]]);
//# sourceMappingURL=main.c92db5a7.chunk.js.map