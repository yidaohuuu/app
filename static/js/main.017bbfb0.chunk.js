(window.webpackJsonp=window.webpackJsonp||[]).push([[0],[,,,,,,,,,function(e,t,n){e.exports=n(17)},,,,,function(e,t,n){},function(e,t,n){e.exports=n.p+"static/media/logo.5d5d9eef.svg"},function(e,t,n){},function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(7),i=n.n(c),l=(n(14),n(1)),o=(n(15),n(16),r.a.createContext()),u={isRequired:function(){throw new Error("A required parameter is missing")},stopPropagation:function(e){e.stopPropagation()}},s=function(e){var t=e.addOn,n=e.colorClass,a=e.onClick,c=e.item;return r.a.createElement("div",{className:"control",onClick:a},r.a.createElement("div",{className:"tags has-addons"},r.a.createElement("a",{className:"tag ".concat(n)},c.name),t))},m=u.isRequired,d=function(e){var t=e.onClick,n=void 0===t?m():t,a=e.item,c=void 0===a?m():a,i=e.onDelete,l=void 0===i?m():i,o=e.colorClass,u=void 0===o?"is-link":o;return r.a.createElement(s,Object.assign({onClick:n,colorClass:u,item:c},{addOn:r.a.createElement("a",{className:"tag is-delete",onClick:function(e){return l(e,c)}})}))},f=u.isRequired,v=function(e){var t=e.topic,n=void 0===t?f():t,c=e.onClick,i=void 0===c?f():c,l=Object(a.useContext)(o);return r.a.createElement(d,{onClick:i,item:n,onDelete:function(e,t){e.stopPropagation(),l.removeTopic(t)}})},p=n(2);function b(e){var t=e.children;return r.a.createElement("div",{className:"field is-grouped is-grouped-multiline"},t)}var E=function(e){var t=e.list,n=e.renderContent;return t.length>0?r.a.createElement(b,null,t.map(function(e){return n(e)})):"None"},g=function(e){var t=e.title,n=e.children,a=e.footer;return r.a.createElement("div",{className:"card"},r.a.createElement("header",{className:"card-header"},r.a.createElement("p",{className:"card-header-title"},t)),r.a.createElement("div",{className:"card-content"},r.a.createElement("div",{className:"content"},n)),a?r.a.createElement("footer",{className:"card-footer"},a):null)},h=function(e){var t=e.value,n=e.onChange;return r.a.createElement("div",{className:"control"},r.a.createElement("input",{type:"text",className:"input",value:t,onChange:n}))},C=function(e){var t=e.children;return r.a.createElement("label",{className:"label"},t)},O=function(e){var t=e.children;return r.a.createElement("div",{className:"field"},t)},k=function(e){var t=e.text,n=e.onClick;return r.a.createElement("a",{href:"#",className:"card-footer-item",onClick:n},t)},j=function(e){var t=e.topicName,n=e.onChangeTopicName,a=e.topicDescription,c=e.setTopicDescription,i=e.addTopic;return r.a.createElement(g,{title:"Add Topic",footer:r.a.createElement(k,{text:"Add",onClick:i})},r.a.createElement(O,null,r.a.createElement(C,null,"Name"),r.a.createElement(h,{value:t,onChange:n})),r.a.createElement(O,null,r.a.createElement(C,null,"Description"),r.a.createElement(h,{value:a,onChange:function(e){return c(e.target.value)}})))};var N=function(e){var t=Object(a.useState)(""),n=Object(l.a)(t,2),r=n[0],c=n[1],i=Object(a.useState)(""),o=Object(l.a)(i,2),u=o[0],s=o[1];return{topicName:r,topicDescription:u,addTopic:function(){var t=e.addTopic({name:r,description:u});return c(""),s(""),t},onChangeTopicName:function(e){return c(e.target.value)},setTopicDescription:s}},T=function(e){var t=e.label,n=e.value,a=e.onChange;return r.a.createElement(O,null,r.a.createElement(C,null,t),r.a.createElement(h,{value:n,onChange:a}))},y=function(e){var t=e.labelName,n=e.setLabelName,a=e.addLabel;return r.a.createElement(g,{title:"Add Label",footer:r.a.createElement(k,{text:"Add",onClick:a})},r.a.createElement(T,{label:"Name",value:t,onChange:function(e){return n(e.target.value)}}))};var L=function(e){var t=Object(a.useState)(""),n=Object(l.a)(t,2),r=n[0],c=n[1];return{labelName:r,setLabelName:c,addLabel:function(){var t=e.addLabel({name:r});return c(""),t}}},x=function(e){return r.a.createElement(s,Object.assign({},e,{addOn:r.a.createElement("a",{className:"tag is-warning",onClick:function(t){t.stopPropagation(),e.onAdd&&e.onAdd()}},"Link")}))},w=function(e){var t=e.title,n=e.description;return r.a.createElement("section",{className:"hero is-dark"},r.a.createElement("div",{className:"hero-body"},r.a.createElement("div",{className:"container"},r.a.createElement("h1",{className:"title"},t),r.a.createElement("h2",{className:"subtitle"},n))))};function S(e){var t=e.topic,n=void 0===t?u.isRequired():t,c=(e.topics,Object(a.useContext)(o)),i=c.topics.filter(function(e){return e.id!=n.id}),l=c.getSimilarTopics(n),s=c.getLabels(n),m=N(c),f=Object(p.a)({},m,{addTopic:function(){var e=m.addTopic();c.linkTwoTopics(e,n)}}),v=L(c),h=Object(p.a)({},v,{addLabel:function(){var e=v.addLabel();c.labelTopic(n,e)}}),C=function(e){c.linkTwoTopics(e,n)};return r.a.createElement(a.Fragment,null,r.a.createElement("div",{style:{marginBottom:"20px"}},r.a.createElement(w,{title:n.name,description:n.description})),r.a.createElement(g,{title:"Labels"},r.a.createElement(E,{list:s,renderContent:function(e){return r.a.createElement(d,{key:e.id,colorClass:"is-primary",item:e,onClick:function(){},onDelete:function(){return t=e,void c.removeLabelFromTopic(n,t);var t}})}})),r.a.createElement(g,{title:"Topics"},r.a.createElement("div",{style:{display:"flex"}},r.a.createElement(E,{list:l,renderContent:function(e){return r.a.createElement(d,{key:e.id,item:e,onClick:function(){},onDelete:function(){return t=e,void c.removeTopicLink(t,n);var t}})}}))),r.a.createElement(y,h),r.a.createElement(j,f),r.a.createElement(g,{title:"Other Topics"},r.a.createElement(b,null,i.map(function(e){return r.a.createElement(x,{colorClass:"is-link",key:e.id,item:e,onAdd:function(){return C(e)}})}))),r.a.createElement(g,{title:"All Labels"},r.a.createElement(E,{list:c.labels,renderContent:function(e){return r.a.createElement(x,{colorClass:"is-primary",key:e.id,item:e,onAdd:function(t){return a=e,void c.labelTopic(n,a);var a}})}})))}function A(e){var t=e.colorClass,n=void 0===t?"is-link":t,a=e.text,c=void 0===a?"":a,i=e.onClick;return r.a.createElement("div",{className:"control",onClick:i},r.a.createElement("a",{className:"tag ".concat(n)},c))}var D=function(e){var t=e.label,n=void 0===t?u.isRequired():t,a=e.onClick;return r.a.createElement(A,{onClick:a,text:n.name,colorClass:"is-primary"})};function P(e){var t=e.label,n=e.store.getTopicsByLabel(t),c=n.length>0?r.a.createElement(b,null,n.map(function(e){return r.a.createElement(A,{key:e.id,text:e.name,onClick:function(){}})})):"";return r.a.createElement(a.Fragment,null,r.a.createElement(w,{title:t.name,description:t.description}),r.a.createElement(g,{title:"Topics"},c))}var R=function(e){return r.a.createElement("div",{className:"box"},e.children)},q=n(4),F=n(3),B=n(8),J=!0;var G={saveGraph:function(e){if(!J)return t={graph:e},fetch("/graph",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(t)}).then(function(e){return e.json()});var t,n=new Blob([JSON.stringify(e)],{type:"text/plain;charset=utf-8"});Object(B.saveAs)(n,"graph.txt")},getGraph:function(e){if(!J)return fetch("/graph").then(function(e){return e.json()});var t=e.target;if(t.files.length>0){var n=e.target.files[0],a=new FileReader;a.onload=function(e){var n=JSON.parse(e.target.result);return t.value=null,n},a.readAsText(n)}}};var W=function(){var e=Object(a.useState)(0),t=Object(l.a)(e,2),n=t[0],r=t[1];return{id:n,generate:function(){var e=n+1;return r(e),e},restore:function(e){r(e)}}},I=u.isRequired,$=function(e,t){return[e.id,t.id].sort()},z=function(e,t){return[e.id,t.id]},H=function(){var e=W(),t=function(t){var n=t.name,a=void 0===n?I():n;return{id:e.generate(),name:a,similar:[]}},n=function(t){var n=t.name,a=void 0===n?I():n,r=t.description,c=void 0===r?"":r;return{id:e.generate(),name:a,description:c,labels:[],similar:[],comments:[]}},r=Object(a.useState)({}),c=Object(l.a)(r,2),i=c[0],o=c[1],u=Object(a.useState)({}),s=Object(l.a)(u,2),m=s[0],d=s[1],f=Object(a.useState)(-1),v=Object(l.a)(f,2),b=v[0],E=v[1],g=Object(a.useState)(-1),h=Object(l.a)(g,2),C=h[0],O=h[1],k=Object(a.useState)([]),j=Object(l.a)(k,2),N=j[0],T=j[1],y=Object(a.useState)([]),L=Object(l.a)(y,2),x=L[0],w=L[1],S=Object(a.useState)([]),A=Object(l.a)(S,2),D=A[0],P=A[1],R=C>-1,B=b>-1?i[b]:null,J=R?m[C]:null,H=Object.values(i),K=Object.values(m),M=function(t){e.restore(t.id),o(t.topicDict),d(t.labelDict),T(t.topicLinks),w(t.labelLinks),P(t.topicLabelLinks)},Q=function(e,t){return e[0]===t[0]&&e[1]===t[1]},U=(Object.values(m),function(e){return function(t){return!Q(e,t)}});return{getTopicsByLabel:function(e){var t=e.id,n=[],a=!0,r=!1,c=void 0;try{for(var o,u=D[Symbol.iterator]();!(a=(o=u.next()).done);a=!0){var s=o.value,m=Object(l.a)(s,2),d=m[0];m[1]===t&&n.push(d)}}catch(f){r=!0,c=f}finally{try{a||null==u.return||u.return()}finally{if(r)throw c}}return n.map(function(e){return i[e]})},removeTopicLink:function(e,t){var n=$(e,t);T(N.filter(U(n)))},removeLabelFromTopic:function(e,t){var n=z(e,t);P(D.filter(U(n)))},labelTopic:function(e,t){var n=z(e,t);(function(e){return D.some(function(t){return Q(t,e)})})(n)||P([].concat(Object(q.a)(D),[n]))},getLabels:function(e){var t=e.id,n=[],a=!0,r=!1,c=void 0;try{for(var i,o=D[Symbol.iterator]();!(a=(i=o.next()).done);a=!0){var u=i.value,s=Object(l.a)(u,2),d=s[0],f=s[1];t===d&&n.push(f)}}catch(v){r=!0,c=v}finally{try{a||null==o.return||o.return()}finally{if(r)throw c}}return n.map(function(e){return m[e]})},topics:H,labels:K,addTopic:function(e){var t=n(e);return o(Object(p.a)({},i,Object(F.a)({},t.id,t))),t},addLabel:function(e){var n=t(e);return d(Object(p.a)({},m,Object(F.a)({},n.id,n))),n},save:function(){var t={id:e.id,topicDict:i,labelDict:m,topicLinks:N,labelLinks:x,topicLabelLinks:D};return G.saveGraph(t)},load:M,currentTopic:B,currentLabel:J,changeTopic:function(e){E(e.id)},changeLabel:function(e){O(e.id)},linkTwoTopics:function(e,t){var n=$(e,t);(function(e){return N.some(function(t){return Q(e,t)})})(n)||T([].concat(Object(q.a)(N),[n]))},topicLinks:N,getSimilarTopics:function(e){var t=e.id,n=[],a=!0,r=!1,c=void 0;try{for(var o,u=N[Symbol.iterator]();!(a=(o=u.next()).done);a=!0){var s=o.value,m=Object(l.a)(s,2),d=m[0],f=m[1];d===t&&n.push(f),f===t&&n.push(d)}}catch(v){r=!0,c=v}finally{try{a||null==u.return||u.return()}finally{if(r)throw c}}return n.map(function(e){return i[e]})},updateTopic:function(e){o(Object(p.a)({},i,Object(F.a)({},e.id,e)))},removeTopic:function(e){var t=Object.fromEntries(Object.entries(i).filter(function(t){return t[0]!=e.id}));o(t),T(N.filter(function(t){var n=Object(l.a)(t,2),a=n[0],r=n[1];return a!==e.id&&r!==e.id})),P(D.filter(function(t){return Object(l.a)(t,1)[0]!==e.id}))}}},K=function(e){return r.a.createElement("div",{style:{margin:"20px"}},e.children)},M=function(e){var t=e.children,n=e.onClick;return r.a.createElement("button",{className:"button",onClick:n},t)},Q=function(e){var t=e.onChange;return r.a.createElement("div",{className:"file"},r.a.createElement("label",{className:"file-label"},r.a.createElement("input",{type:"file",onChange:t,className:"file-input"}),r.a.createElement("span",{className:"file-cta"},r.a.createElement("span",{className:"file-icon"},r.a.createElement("i",{className:"fas fa-upload"})),r.a.createElement("span",{className:"file-label"},"Choose a file..."))))},U=function(e){var t=e.text,n=e.onClick;return r.a.createElement(R,null,r.a.createElement(M,{onClick:n},t))},V=function(e){var t=e.onClick;return r.a.createElement(U,{onClick:t,text:"Save"})},X=function(){var e="main",t="topicPage",n="labelPage",c=H(),i=c.topics,u=c.labels,s=Object(a.useState)(e),m=Object(l.a)(s,2),d=m[0],f=m[1],p=r.a.createElement(a.Fragment,null,r.a.createElement(g,{title:"Topics"},i.length>0?r.a.createElement(b,null,i.map(function(e){return r.a.createElement(v,{key:e.name,topic:e,onClick:function(){return function(e){c.changeTopic(e),f(t)}(e)}})})):"None"),r.a.createElement(g,{title:"Labels"},u.length>0?r.a.createElement(b,null,u.map(function(e){return r.a.createElement(D,{key:e.name,label:e,onClick:function(){return function(e){c.changeLabel(e),f(n)}(e)}})})):"None"),r.a.createElement(j,N(c)),r.a.createElement(y,L(c)),r.a.createElement(V,{onClick:function(){return c.save()}}),r.a.createElement(R,null,r.a.createElement(Q,{onChange:function(e){var t=e.target;if(t.files.length>0){var n=e.target.files[0],a=new FileReader;a.onload=function(e){var n=JSON.parse(e.target.result);t.value=null,c.load(n)},a.readAsText(n)}}})));return r.a.createElement(o.Provider,{value:c},r.a.createElement(K,null,function(){switch(d){case e:return p;case t:return r.a.createElement(S,{topic:c.currentTopic});case n:return r.a.createElement(P,{label:c.currentLabel,store:c});default:return p}}(),r.a.createElement(U,{text:"to main page",onClick:function(){return f(e)}})))},Y=function(){return r.a.createElement("div",null,r.a.createElement(X,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(r.a.createElement(Y,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}],[[9,1,2]]]);
//# sourceMappingURL=main.017bbfb0.chunk.js.map