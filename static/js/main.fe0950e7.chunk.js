(window.webpackJsonp=window.webpackJsonp||[]).push([[0],[,,,,,,,,,function(e,t,n){e.exports=n(17)},,,,,function(e,t,n){},function(e,t,n){e.exports=n.p+"static/media/logo.5d5d9eef.svg"},function(e,t,n){},function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),i=n(7),c=n.n(i),l=(n(14),n(1)),o=(n(15),n(16),r.a.createContext()),u={isRequired:function(){throw new Error("A required parameter is missing")},stopPropagation:function(e){e.stopPropagation()}},s=function(e){var t=e.addOn,n=e.colorClass,a=e.onClick,i=e.item;return r.a.createElement("div",{className:"control",onClick:a},r.a.createElement("div",{className:"tags has-addons"},r.a.createElement("a",{className:"tag ".concat(n)},i.name),t))},m=u.isRequired,d=function(e){var t=e.onClick,n=void 0===t?m():t,a=e.item,i=void 0===a?m():a,c=e.onDelete,l=void 0===c?m():c,o=e.colorClass,u=void 0===o?"is-link":o;return r.a.createElement(s,Object.assign({onClick:n,colorClass:u,item:i},{addOn:r.a.createElement("a",{className:"tag is-delete",onClick:function(e){return l(e,i)}})}))},f=u.isRequired,v=function(e){var t=e.topic,n=void 0===t?f():t,i=e.onClick,c=void 0===i?f():i,l=Object(a.useContext)(o);return r.a.createElement(d,{onClick:c,item:n,onDelete:function(e,t){e.stopPropagation(),l.removeTopic(t)}})},p=n(2);function b(e){var t=e.children;return r.a.createElement("div",{className:"field is-grouped is-grouped-multiline"},t)}var E=function(e){var t=e.list,n=e.renderContent;return t.length>0?r.a.createElement(b,null,t.map(function(e){return n(e)})):"None"},g=function(e){var t=e.title,n=e.children,a=e.footer;return r.a.createElement("div",{className:"card"},r.a.createElement("header",{className:"card-header"},r.a.createElement("p",{className:"card-header-title"},t)),r.a.createElement("div",{className:"card-content"},r.a.createElement("div",{className:"content"},n)),a?r.a.createElement("footer",{className:"card-footer"},a):null)},h=function(e){var t=e.value,n=e.onChange;return r.a.createElement("div",{className:"control"},r.a.createElement("input",{type:"text",className:"input",value:t,onChange:n}))},O=function(e){var t=e.children;return r.a.createElement("label",{className:"label"},t)},C=function(e){var t=e.children;return r.a.createElement("div",{className:"field"},t)},k=function(e){var t=e.text,n=e.onClick;return r.a.createElement("a",{href:"#",className:"card-footer-item",onClick:n},t)},j=function(e){var t=e.topicName,n=e.onChangeTopicName,a=e.topicDescription,i=e.setTopicDescription,c=e.addTopic;return r.a.createElement(g,{title:"Add Topic",footer:r.a.createElement(k,{text:"Add",onClick:c})},r.a.createElement(C,null,r.a.createElement(O,null,"Name"),r.a.createElement(h,{value:t,onChange:n})),r.a.createElement(C,null,r.a.createElement(O,null,"Description"),r.a.createElement(h,{value:a,onChange:function(e){return i(e.target.value)}})))};var N=function(e){var t=Object(a.useState)(""),n=Object(l.a)(t,2),r=n[0],i=n[1],c=Object(a.useState)(""),o=Object(l.a)(c,2),u=o[0],s=o[1];return{topicName:r,topicDescription:u,addTopic:function(){var t=e.addTopic({name:r,description:u});return i(""),s(""),t},onChangeTopicName:function(e){return i(e.target.value)},setTopicDescription:s}},T=function(e){var t=e.label,n=e.value,a=e.onChange;return r.a.createElement(C,null,r.a.createElement(O,null,t),r.a.createElement(h,{value:n,onChange:a}))},y=function(e){var t=e.labelName,n=e.setLabelName,a=e.addLabel;return r.a.createElement(g,{title:"Add Label",footer:r.a.createElement(k,{text:"Add",onClick:a})},r.a.createElement(T,{label:"Name",value:t,onChange:function(e){return n(e.target.value)}}))};var L=function(e){var t=Object(a.useState)(""),n=Object(l.a)(t,2),r=n[0],i=n[1];return{labelName:r,setLabelName:i,addLabel:function(){var t=e.addLabel({name:r});return i(""),t}}},w=function(e){return r.a.createElement(s,Object.assign({},e,{addOn:r.a.createElement("a",{className:"tag is-warning",onClick:function(t){t.stopPropagation(),e.onAdd&&e.onAdd()}},"Link")}))},x=function(e){var t=e.title,n=e.description;return r.a.createElement("section",{className:"hero is-dark"},r.a.createElement("div",{className:"hero-body"},r.a.createElement("div",{className:"container"},r.a.createElement("h1",{className:"title"},t),r.a.createElement("h2",{className:"subtitle"},n))))};function S(e){var t=e.topic,n=void 0===t?u.isRequired():t,i=(e.topics,Object(a.useContext)(o)),c=i.topics.filter(function(e){return e.id!=n.id}),l=i.getSimilarTopics(n),s=i.getLabels(n),m=N(i),f=Object(p.a)({},m,{addTopic:function(){var e=m.addTopic();i.linkTwoTopics(e,n)}}),v=L(i),h=Object(p.a)({},v,{addLabel:function(){var e=v.addLabel();i.labelTopic(n,e)}}),O=function(e){i.linkTwoTopics(e,n)};return r.a.createElement(a.Fragment,null,r.a.createElement("div",{style:{marginBottom:"20px"}},r.a.createElement(x,{title:n.name,description:n.description})),r.a.createElement(g,{title:"Labels"},r.a.createElement(E,{list:s,renderContent:function(e){return r.a.createElement(d,{key:e.id,colorClass:"is-primary",item:e,onClick:function(){},onDelete:function(){return t=e,void i.removeLabelFromTopic(n,t);var t}})}})),r.a.createElement(g,{title:"Topics"},r.a.createElement("div",{style:{display:"flex"}},r.a.createElement(E,{list:l,renderContent:function(e){return r.a.createElement(d,{key:e.id,item:e,onClick:function(){},onDelete:function(){return t=e,void i.removeTopicLink(t,n);var t}})}}))),r.a.createElement(y,h),r.a.createElement(j,f),r.a.createElement(g,{title:"Other Topics"},r.a.createElement(b,null,c.map(function(e){return r.a.createElement(w,{colorClass:"is-link",key:e.id,item:e,onAdd:function(){return O(e)}})}))),r.a.createElement(g,{title:"All Labels"},r.a.createElement(E,{list:i.labels,renderContent:function(e){return r.a.createElement(w,{colorClass:"is-primary",key:e.id,item:e,onAdd:function(t){return a=e,void i.labelTopic(n,a);var a}})}})))}var D=function(e){var t=e.label,n=void 0===t?u.isRequired():t,a=e.onClick;return r.a.createElement(d,{onClick:a,item:n,onDelete:u.stopPropagation,colorClass:"is-primary"})};function A(e){var t=e.label,n=e.store.getTopicsByLabel(t),i=n.length>0?r.a.createElement(b,null,n.map(function(e){return r.a.createElement(d,{key:e.id,item:e,onClick:function(){},onDelete:function(){return function(e){alert("wanted to remove this topic",e.name)}(e)}})})):"";return r.a.createElement(a.Fragment,null,r.a.createElement(x,{title:t.name,description:t.description}),r.a.createElement(g,{title:"Topics"},i))}var P=function(e){return r.a.createElement("div",{className:"box"},e.children)},R=n(4),q=n(3),F=n(8),B=!0;var J={saveGraph:function(e){if(!B)return t={graph:e},fetch("/graph",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(t)}).then(function(e){return e.json()});var t,n=new Blob([JSON.stringify(e)],{type:"text/plain;charset=utf-8"});Object(F.saveAs)(n,"graph.txt")},getGraph:function(e){if(!B)return fetch("/graph").then(function(e){return e.json()});var t=e.target;if(t.files.length>0){var n=e.target.files[0],a=new FileReader;a.onload=function(e){var n=JSON.parse(e.target.result);return t.value=null,n},a.readAsText(n)}}};var G=function(){var e=Object(a.useState)(0),t=Object(l.a)(e,2),n=t[0],r=t[1];return{id:n,generate:function(){var e=n+1;return r(e),e},restore:function(e){r(e)}}},W=u.isRequired,I=function(e,t){return[e.id,t.id].sort()},$=function(e,t){return[e.id,t.id]},z=function(){var e=G(),t=function(t){var n=t.name,a=void 0===n?W():n;return{id:e.generate(),name:a,similar:[]}},n=function(t){var n=t.name,a=void 0===n?W():n,r=t.description,i=void 0===r?"":r;return{id:e.generate(),name:a,description:i,labels:[],similar:[],comments:[]}},r=Object(a.useState)({}),i=Object(l.a)(r,2),c=i[0],o=i[1],u=Object(a.useState)({}),s=Object(l.a)(u,2),m=s[0],d=s[1],f=Object(a.useState)(-1),v=Object(l.a)(f,2),b=v[0],E=v[1],g=Object(a.useState)(-1),h=Object(l.a)(g,2),O=h[0],C=h[1],k=Object(a.useState)([]),j=Object(l.a)(k,2),N=j[0],T=j[1],y=Object(a.useState)([]),L=Object(l.a)(y,2),w=L[0],x=L[1],S=Object(a.useState)([]),D=Object(l.a)(S,2),A=D[0],P=D[1],F=O>-1,B=b>-1?c[b]:null,z=F?m[O]:null,H=Object.values(c),K=Object.values(m),M=function(t){e.restore(t.id),o(t.topicDict),d(t.labelDict),T(t.topicLinks),x(t.labelLinks),P(t.topicLabelLinks)},Q=function(e,t){return e[0]===t[0]&&e[1]===t[1]},U=(Object.values(m),function(e){return function(t){return!Q(e,t)}});return{getTopicsByLabel:function(e){var t=e.id,n=[],a=!0,r=!1,i=void 0;try{for(var o,u=A[Symbol.iterator]();!(a=(o=u.next()).done);a=!0){var s=o.value,m=Object(l.a)(s,2),d=m[0];m[1]===t&&n.push(d)}}catch(f){r=!0,i=f}finally{try{a||null==u.return||u.return()}finally{if(r)throw i}}return n.map(function(e){return c[e]})},removeTopicLink:function(e,t){var n=I(e,t);T(N.filter(U(n)))},removeLabelFromTopic:function(e,t){var n=$(e,t);P(A.filter(U(n)))},labelTopic:function(e,t){var n=$(e,t);(function(e){return A.some(function(t){return Q(t,e)})})(n)||P([].concat(Object(R.a)(A),[n]))},getLabels:function(e){var t=e.id,n=[],a=!0,r=!1,i=void 0;try{for(var c,o=A[Symbol.iterator]();!(a=(c=o.next()).done);a=!0){var u=c.value,s=Object(l.a)(u,2),d=s[0],f=s[1];t===d&&n.push(f)}}catch(v){r=!0,i=v}finally{try{a||null==o.return||o.return()}finally{if(r)throw i}}return n.map(function(e){return m[e]})},topics:H,labels:K,addTopic:function(e){var t=n(e);return o(Object(p.a)({},c,Object(q.a)({},t.id,t))),t},addLabel:function(e){var n=t(e);return d(Object(p.a)({},m,Object(q.a)({},n.id,n))),n},save:function(){var t={id:e.id,topicDict:c,labelDict:m,topicLinks:N,labelLinks:w,topicLabelLinks:A};return J.saveGraph(t)},load:M,currentTopic:B,currentLabel:z,changeTopic:function(e){E(e.id)},changeLabel:function(e){C(e.id)},linkTwoTopics:function(e,t){var n=I(e,t);(function(e){return N.some(function(t){return Q(e,t)})})(n)||T([].concat(Object(R.a)(N),[n]))},topicLinks:N,getSimilarTopics:function(e){var t=e.id,n=[],a=!0,r=!1,i=void 0;try{for(var o,u=N[Symbol.iterator]();!(a=(o=u.next()).done);a=!0){var s=o.value,m=Object(l.a)(s,2),d=m[0],f=m[1];d===t&&n.push(f),f===t&&n.push(d)}}catch(v){r=!0,i=v}finally{try{a||null==u.return||u.return()}finally{if(r)throw i}}return n.map(function(e){return c[e]})},updateTopic:function(e){o(Object(p.a)({},c,Object(q.a)({},e.id,e)))},removeTopic:function(e){var t=Object.fromEntries(Object.entries(c).filter(function(t){return t[0]!=e.id}));o(t),T(N.filter(function(t){var n=Object(l.a)(t,2),a=n[0],r=n[1];return a!==e.id&&r!==e.id})),P(A.filter(function(t){return Object(l.a)(t,1)[0]!==e.id}))}}},H=function(e){return r.a.createElement("div",{style:{margin:"20px"}},e.children)},K=function(e){var t=e.children,n=e.onClick;return r.a.createElement("button",{className:"button",onClick:n},t)},M=function(e){var t=e.onChange;return r.a.createElement("div",{className:"file"},r.a.createElement("label",{className:"file-label"},r.a.createElement("input",{type:"file",onChange:t,className:"file-input"}),r.a.createElement("span",{className:"file-cta"},r.a.createElement("span",{className:"file-icon"},r.a.createElement("i",{className:"fas fa-upload"})),r.a.createElement("span",{className:"file-label"},"Choose a file..."))))},Q=function(e){var t=e.text,n=e.onClick;return r.a.createElement(P,null,r.a.createElement(K,{onClick:n},t))},U=function(e){var t=e.onClick;return r.a.createElement(Q,{onClick:t,text:"Save"})},V=function(){var e="main",t="topicPage",n="labelPage",i=z(),c=i.topics,u=i.labels,s=Object(a.useState)(e),m=Object(l.a)(s,2),d=m[0],f=m[1],p=r.a.createElement(a.Fragment,null,r.a.createElement(g,{title:"Topics"},c.length>0?r.a.createElement(b,null,c.map(function(e){return r.a.createElement(v,{key:e.name,topic:e,onClick:function(){return function(e){i.changeTopic(e),f(t)}(e)}})})):"None"),r.a.createElement(g,{title:"Labels"},u.length>0?r.a.createElement(b,null,u.map(function(e){return r.a.createElement(D,{key:e.name,label:e,onClick:function(){return function(e){i.changeLabel(e),f(n)}(e)}})})):"None"),r.a.createElement(j,N(i)),r.a.createElement(y,L(i)),r.a.createElement(U,{onClick:function(){return i.save()}}),r.a.createElement(P,null,r.a.createElement(M,{onChange:function(e){var t=e.target;if(t.files.length>0){var n=e.target.files[0],a=new FileReader;a.onload=function(e){var n=JSON.parse(e.target.result);t.value=null,i.load(n)},a.readAsText(n)}}})));return r.a.createElement(o.Provider,{value:i},r.a.createElement(H,null,function(){switch(d){case e:return p;case t:return r.a.createElement(S,{topic:i.currentTopic});case n:return r.a.createElement(A,{label:i.currentLabel,store:i});default:return p}}(),r.a.createElement(Q,{text:"to main page",onClick:function(){return f(e)}})))},X=function(){return r.a.createElement("div",null,r.a.createElement(V,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(r.a.createElement(X,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}],[[9,1,2]]]);
//# sourceMappingURL=main.fe0950e7.chunk.js.map