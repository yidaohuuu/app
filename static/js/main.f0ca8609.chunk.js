(window.webpackJsonp=window.webpackJsonp||[]).push([[0],[,,,,,,,,,function(e,t,n){e.exports=n(17)},,,,,function(e,t,n){},function(e,t,n){e.exports=n.p+"static/media/logo.5d5d9eef.svg"},function(e,t,n){},function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),i=n(7),c=n.n(i),l=(n(14),n(1)),o=(n(15),n(16),r.a.createContext()),u={isRequired:function(){throw new Error("A required parameter is missing")}},s=u.isRequired,m={border:"1px solid black",margin:"5px",padding:"3px",maxWidth:"100px",display:"inline-block",backgroundColor:"green"},f=function(e){var t=e.topic,n=void 0===t?s():t,i=e.onClick,c=void 0===i?s():i,l=Object(a.useContext)(o);return r.a.createElement("div",{onClick:c,style:m},n.name,r.a.createElement("span",{onClick:function(e){return function(e,t){e.stopPropagation(),l.removeTopic(t)}(e,n)}},"X"))},d=n(2),b=function(e){return r.a.createElement("div",{style:{border:"1px solid black",margin:"20px",padding:"10px"}},e.children)},p=function(e){var t=e.list,n=e.getKey,a=void 0===n?function(e){return e}:n,i=e.renderContent;return r.a.createElement("ul",null,t.map(function(e){return r.a.createElement("li",{key:a(e)},i(e))}))};function v(e){var t=e.topic,n=void 0===t?u.isRequired():t,i=(e.topics,Object(a.useContext)(o)),c=i.topics.filter(function(e){return e.id!=n.id}),s=i.getSimilarTopics(n),m=i.getLabels(n),f=r.a.createElement(p,{list:s,getKey:function(e){return e.id},renderContent:function(e){return r.a.createElement("span",null," ",e.name," ",r.a.createElement("button",{onClick:function(t){return a=e,void i.removeTopicLink(a,n);var a}},"Remove")," ")}}),v=function(e){i.linkTwoTopics(e,n)},E=r.a.createElement("ul",null,c.map(function(e){return r.a.createElement(a.Fragment,{key:e.id},r.a.createElement("li",null," ",e.name," ",r.a.createElement("button",{onClick:function(){return v(e)}}," link ")," "))})),g=Object(a.useState)(n.name),O=Object(l.a)(g,2),j=O[0],k=O[1],h=Object(a.useState)(n.description),C=Object(l.a)(h,2),y=C[0],x=C[1];return r.a.createElement(a.Fragment,null,r.a.createElement(b,null,r.a.createElement("div",{style:{border:"1px solid black",backgroundColor:"yellow"}},"Name: ",r.a.createElement("br",null),r.a.createElement("input",{value:j,onChange:function(e){return k(e.target.value)}})),r.a.createElement("div",null,"Description: ",r.a.createElement("br",null),r.a.createElement("textarea",{value:y,onChange:function(e){return x(e.target.value)}})),r.a.createElement("button",{onClick:function(){var e=Object(d.a)({},n,{name:j,description:y});i.updateTopic(e)}},"Save Changes")),r.a.createElement(b,null,"Similar Topics:  ",r.a.createElement("br",null),f),r.a.createElement(b,null,"Labels: ",r.a.createElement("br",null),r.a.createElement(p,{list:m,getKey:function(e){return e.id},renderContent:function(e){return r.a.createElement("span",null," ",e.name," ",r.a.createElement("button",{onClick:function(t){return a=e,void i.removeLabelFromTopic(n,a);var a}},"Remove")," ")}})),r.a.createElement(b,null,"Other nodes: ",r.a.createElement("br",null),E),r.a.createElement(b,null,"All labels: ",r.a.createElement("br",null),r.a.createElement(p,{list:i.labels,getKey:function(e){return e.id},renderContent:function(e){return r.a.createElement("span",null," ",e.name," ",r.a.createElement("button",{onClick:function(t){return a=e,void i.labelTopic(n,a);var a}},"Add")," ")}})))}var E={border:"1px solid black",margin:"5px",padding:"3px",maxWidth:"100px",display:"inline-block",backgroundColor:"yellow"},g=function(e){var t=e.label,n=void 0===t?u.isRequired():t,a=e.onClick;return r.a.createElement("div",{onClick:a,style:E},n.name)};function O(){return"oh label page is different"}var j=n(4),k=n(3),h=n(8),C=!0;var y={saveGraph:function(e){if(!C)return t={graph:e},fetch("/graph",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(t)}).then(function(e){return e.json()});var t,n=new Blob([JSON.stringify(e)],{type:"text/plain;charset=utf-8"});Object(h.saveAs)(n,"graph.txt")},getGraph:function(e){if(!C)return fetch("/graph").then(function(e){return e.json()});var t=e.target;if(t.files.length>0){var n=e.target.files[0],a=new FileReader;a.onload=function(e){var n=JSON.parse(e.target.result);return t.value=null,n},a.readAsText(n)}}};var x=function(){var e=Object(a.useState)(0),t=Object(l.a)(e,2),n=t[0],r=t[1];return{id:n,generate:function(){var e=n+1;return r(e),e},restore:function(e){r(e)}}},T=u.isRequired,S=function(e,t){return[e.id,t.id].sort()},w=function(e,t){return[e.id,t.id]},L=function(){var e=x(),t=function(t){var n=t.name,a=void 0===n?T():n;return{id:e.generate(),name:a,similar:[]}},n=function(t){var n=t.name,a=void 0===n?T():n,r=t.description,i=void 0===r?"":r;return{id:e.generate(),name:a,description:i,labels:[],similar:[],comments:[]}},r=Object(a.useState)({}),i=Object(l.a)(r,2),c=i[0],o=i[1],u=Object(a.useState)({}),s=Object(l.a)(u,2),m=s[0],f=s[1],b=Object(a.useState)(-1),p=Object(l.a)(b,2),v=p[0],E=p[1],g=Object(a.useState)(-1),O=Object(l.a)(g,2),h=O[0],C=O[1],L=Object(a.useState)([]),R=Object(l.a)(L,2),A=R[0],F=R[1],N=Object(a.useState)([]),q=Object(l.a)(N,2),D=q[0],J=q[1],P=Object(a.useState)([]),K=Object(l.a)(P,2),W=K[0],B=K[1],G=h>-1,I=v>-1?c[v]:null,X=G?m[h]:null,$=Object.values(c),z=Object.values(m),H=function(t){e.restore(t.id),o(t.topicDict),f(t.labelDict),F(t.topicLinks),J(t.labelLinks),B(t.topicLabelLinks)},M=function(e,t){return e[0]===t[0]&&e[1]===t[1]},Q=(Object.values(m),function(e){return function(t){return!M(e,t)}});return{removeTopicLink:function(e,t){var n=S(e,t);F(A.filter(Q(n)))},removeLabelFromTopic:function(e,t){var n=w(e,t);B(W.filter(Q(n)))},labelTopic:function(e,t){var n=w(e,t);(function(e){return W.some(function(t){return M(t,e)})})(n)||B([].concat(Object(j.a)(W),[n]))},getLabels:function(e){var t=e.id,n=[],a=!0,r=!1,i=void 0;try{for(var c,o=W[Symbol.iterator]();!(a=(c=o.next()).done);a=!0){var u=c.value,s=Object(l.a)(u,2),f=s[0],d=s[1];t===f&&n.push(d)}}catch(b){r=!0,i=b}finally{try{a||null==o.return||o.return()}finally{if(r)throw i}}return n.map(function(e){return m[e]})},topics:$,labels:z,addTopic:function(e){var t=n(e);o(Object(d.a)({},c,Object(k.a)({},t.id,t)))},addLabel:function(e){var n=t(e);f(Object(d.a)({},m,Object(k.a)({},n.id,n)))},save:function(){var t={id:e.id,topicDict:c,labelDict:m,topicLinks:A,labelLinks:D,topicLabelLinks:W};return y.saveGraph(t)},load:H,currentTopic:I,currentLabel:X,changeTopic:function(e){E(e.id)},changeLabel:function(e){C(e.id)},linkTwoTopics:function(e,t){var n=S(e,t);(function(e){return A.some(function(t){return M(e,t)})})(n)||F([].concat(Object(j.a)(A),[n]))},topicLinks:A,getSimilarTopics:function(e){var t=e.id,n=[],a=!0,r=!1,i=void 0;try{for(var o,u=A[Symbol.iterator]();!(a=(o=u.next()).done);a=!0){var s=o.value,m=Object(l.a)(s,2),f=m[0],d=m[1];f===t&&n.push(d),d===t&&n.push(f)}}catch(b){r=!0,i=b}finally{try{a||null==u.return||u.return()}finally{if(r)throw i}}return n.map(function(e){return c[e]})},updateTopic:function(e){o(Object(d.a)({},c,Object(k.a)({},e.id,e)))},removeTopic:function(e){var t=Object.fromEntries(Object.entries(c).filter(function(t){return t[0]!=e.id}));o(t),F(A.filter(function(t){var n=Object(l.a)(t,2),a=n[0],r=n[1];return a!==e.id&&r!==e.id})),B(W.filter(function(t){return Object(l.a)(t,1)[0]!==e.id}))}}},R=function(e){var t=e.text,n=e.onClick;return r.a.createElement(b,null,r.a.createElement("button",{onClick:n},t))},A=function(e){var t=e.onClick;return r.a.createElement(R,{onClick:t,text:"Save"})},F=function(){var e="main",t="topicPage",n="labelPage",i=L(),c=i.topics,u=i.labels,s=Object(a.useState)(""),m=Object(l.a)(s,2),d=m[0],p=m[1],E=Object(a.useState)(""),j=Object(l.a)(E,2),k=j[0],h=j[1],C=Object(a.useState)(""),y=Object(l.a)(C,2),x=y[0],T=y[1],S=Object(a.useState)(e),w=Object(l.a)(S,2),F=w[0],N=w[1],q=function(){return N(n)},D=r.a.createElement(a.Fragment,null,r.a.createElement(b,{key:"1"},"Current topics:",c.map(function(e){return r.a.createElement(f,{key:e.name,topic:e,onClick:function(){return function(e){i.changeTopic(e),N(t)}(e)}})}),r.a.createElement("br",null),"Current labels:",u.map(function(e){return r.a.createElement(g,{key:e.name,label:e,onClick:q})})),r.a.createElement(b,{key:"2"},"Create a topic: ",r.a.createElement("br",null),"Name: ",r.a.createElement("input",{value:d,onChange:function(e){return p(e.target.value)}})," ",r.a.createElement("br",null),"Description: ",r.a.createElement("input",{value:x,onChange:function(e){return T(e.target.value)}})," ",r.a.createElement("br",null),r.a.createElement("button",{onClick:function(){i.addTopic({name:d,description:x}),p(""),T("")}},"Create")),r.a.createElement(b,null,"Create a label: ",r.a.createElement("br",null),"Name: ",r.a.createElement("input",{value:k,onChange:function(e){return h(e.target.value)}})," ",r.a.createElement("br",null),r.a.createElement("button",{onClick:function(){i.addLabel({name:k}),h("")}},"Create")),r.a.createElement(A,{onClick:function(){return i.save()}}),r.a.createElement(b,null,"Load from file: ",r.a.createElement("input",{type:"file",onChange:function(e){var t=e.target;if(t.files.length>0){var n=e.target.files[0],a=new FileReader;a.onload=function(e){var n=JSON.parse(e.target.result);t.value=null,i.load(n)},a.readAsText(n)}}})));return r.a.createElement(o.Provider,{value:i},function(){switch(F){case e:return D;case t:return r.a.createElement(v,{topic:i.currentTopic});case n:return r.a.createElement(O,null);default:return D}}(),r.a.createElement(R,{text:"to main page",onClick:function(){return N(e)}}))},N=function(){return r.a.createElement("div",null,r.a.createElement(F,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(r.a.createElement(N,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}],[[9,1,2]]]);
//# sourceMappingURL=main.f0ca8609.chunk.js.map